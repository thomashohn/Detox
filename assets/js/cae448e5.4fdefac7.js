"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2393],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),s=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(r),m=o,f=u["".concat(c,".").concat(m)]||u[m]||d[m]||i;return r?n.createElement(f,a(a({ref:t},p),{},{components:r})):n.createElement(f,a({ref:t},p))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,a=new Array(i);a[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[u]="string"==typeof e?e:o,a[1]=l;for(var s=2;s<i;s++)a[s]=r[s];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},45065:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=r(87462),o=(r(67294),r(3905));const i={},a="Parallel Test Execution",l={unversionedId:"guide/parallel-test-execution",id:"guide/parallel-test-execution",title:"Parallel Test Execution",description:"Detox comes out of the box with multi-worker support thanks to (Jest's feature,  etc.).",source:"@site/../docs/guide/parallel-test-execution.md",sourceDirName:"guide",slug:"/guide/parallel-test-execution",permalink:"/Detox/docs/next/guide/parallel-test-execution",draft:!1,editUrl:"https://github.com/wix/Detox/edit/master/docs/../docs/guide/parallel-test-execution.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Adding testID to your components",permalink:"/Detox/docs/next/guide/test-id"},next:{title:"Using TypeScript",permalink:"/Detox/docs/next/guide/typescript"}},c={},s=[{value:"Device Creation",id:"device-creation",level:2},{value:"Lock File",id:"lock-file",level:2}],p={toc:s},u="wrapper";function d(e){let{components:t,...r}=e;return(0,o.kt)(u,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"parallel-test-execution"},"Parallel Test Execution"),(0,o.kt)("p",null,"Detox comes out of the box with multi-worker support thanks to (",(0,o.kt)("a",{parentName:"p",href:"http://jestjs.io/docs/en/cli#maxworkers-num"},"Jest's feature"),",  etc.)."),(0,o.kt)("p",null,"By default ",(0,o.kt)("inlineCode",{parentName:"p"},"detox test")," will run the test runner with one worker. Worker count can be controlled by forwarding ",(0,o.kt)("inlineCode",{parentName:"p"},"--maxWorkers <N>")," to Jest via ",(0,o.kt)("a",{parentName:"p",href:"/Detox/docs/next/cli/test"},(0,o.kt)("inlineCode",{parentName:"a"},"detox test")),"."),(0,o.kt)("h2",{id:"device-creation"},"Device Creation"),(0,o.kt)("p",null,"While running with multiple workers, Detox might not have an available simulator for every worker.\nIf no simulator is available for that worker, the worker will create one with the name ",(0,o.kt)("inlineCode",{parentName:"p"},"{name}-Detox"),"."),(0,o.kt)("h2",{id:"lock-file"},"Lock File"),(0,o.kt)("p",null,"Since any attached device can potentially be used simultaneously by multiple workers, Detox needs to maintain a lock file to make sure that doesn't happen.\nTherefore, Detox maintains ",(0,o.kt)("inlineCode",{parentName:"p"},"device.registry.json"),", a file with exclusive access based on ",(0,o.kt)("inlineCode",{parentName:"p"},"proper-lockfile"),", controlled by Detox, that registers all simulators and emulators\ncurrently in use by Detox instances."),(0,o.kt)("p",null,"The lock file location is determined by the OS, and ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/wix/detox/blob/master/detox/src/utils/appdatapath.js"},"defined here"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"MacOS"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/Library/Detox/device.registry.json")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Linux"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.local/share/Detox/device.registry.json")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Windows"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"%LOCALAPPDATA%/data/Detox/device.registry.json")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"%USERPROFILE%/Application Data/Detox/device.registry.json"))))}d.isMDXComponent=!0}}]);